---
- name: Install general stuffs
  pacman:
    name: ["xorg-server", "i3-gaps", "lightdm", "lightdm-webkit2-greeter", "git", "ansible", "alacritty", "base-devel"]
    state: present
  become: yes

- name: Ensure lightdm uses webkit2-greeter
  lineinfile:
    path: /etc/lightdm/lightdm.conf
    regexp: '^#?greeter-session='
    line: greeter-session=lightdm-webkit2-greeter
  become: yes

- name: Ensure lightdm uses i3
  lineinfile:
    path: /etc/lightdm/lightdm.conf
    regexp: '^#?user-session='
    line: user-session=i3
  become: yes

- name: Start lightdm
  service:
    name: lightdm
    enabled: true
    state: started
  become: yes
